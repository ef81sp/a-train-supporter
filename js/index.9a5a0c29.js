(function(e){function t(t){for(var a,r,l=t[0],c=t[1],u=t[2],s=0,b=[];s<l.length;s++)r=l[s],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&b.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},i={index:0},o=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-2d21e38c":"8a7c5d5d"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=r(e);var u=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,n[1](u)}i[e]=void 0}};var s=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/a-train-supporter/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0474":function(e,t,n){"use strict";n("76da")},"04e3":function(e,t,n){},"0f71":function(e,t,n){"use strict";n("1fcb")},"1fcb":function(e,t,n){},2043:function(e,t,n){},"22cf":function(e,t,n){"use strict";n("981b")},3595:function(e,t,n){"use strict";n("ccc2")},"40fb":function(e,t,n){"use strict";n("04e3")},"4deb":function(e,t,n){"use strict";n("82ad")},"76da":function(e,t,n){},"82ad":function(e,t,n){},"981b":function(e,t,n){},a23e:function(e,t,n){"use strict";n("f32c")},bb1f:function(e,t,n){},c5b9:function(e,t,n){"use strict";n("f7d3")},ccc2:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function i(e,t){var n=Object(a["G"])("router-view");return Object(a["y"])(),Object(a["f"])(n)}n("4deb");var o=n("6b0d"),r=n.n(o);const l={},c=r()(l,[["render",i]]);var u=c,s=n("9483");Object(s["a"])("".concat("/a-train-supporter/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var d=n("6c02"),b={class:"home"},m={class:"card"};function f(e,t,n,i,o,r){Object(a["G"])("MeasureNeccesaryTime");var l=Object(a["G"])("Diagram");return Object(a["y"])(),Object(a["h"])("div",b,[Object(a["g"])("",!0),Object(a["i"])("div",m,[Object(a["l"])(l)])])}var p=function(e){return Object(a["B"])("data-v-3b9bdf89"),e=e(),Object(a["z"])(),e},v=p((function(){return Object(a["i"])("p",{class:"caption"},[Object(a["k"])(" ゲーム内の時間拡張倍率・早回し倍率を選んで、列車の走行に合わせてボタンを押すと、"),Object(a["i"])("br"),Object(a["k"])("ゲーム内時間でのだいたいの所要時間が測れます。 ")],-1)})),O={class:"formgrid grid"},j={class:"field col"},g=p((function(){return Object(a["i"])("label",{for:"multiplyers"}," 時間拡張",-1)})),y={class:"field col"},h=p((function(){return Object(a["i"])("label",{for:"fast-forward"},"早回し",-1)})),T={class:"timer"};function S(e,t,n,i,o,r){var l=Object(a["G"])("Dropdown"),c=Object(a["G"])("MeasureNecessaryTimeRunningButton"),u=Object(a["G"])("Button"),s=Object(a["G"])("Card");return Object(a["y"])(),Object(a["f"])(s,{class:"card"},{content:Object(a["Q"])((function(){return[v,Object(a["i"])("div",O,[Object(a["i"])("div",j,[g,Object(a["l"])(l,{modelValue:e.selectedMultiplyer,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedMultiplyer=t}),options:e.MULTIPLYERS,optionLabel:"name",optionValue:"value",placeholder:"x3〜x450",id:"multiplyers",disabled:e.isStarted},null,8,["modelValue","options","disabled"])]),Object(a["i"])("div",y,[h,Object(a["l"])(l,{modelValue:e.selectedFastForward,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedFastForward=t}),options:e.FAST_FORWARDS,optionLabel:"name",optionValue:"value",placeholder:"x1〜x3",id:"fast-forward",disabled:e.isStarted},null,8,["modelValue","options","disabled"])])]),Object(a["i"])("p",T,Object(a["K"])(e.formattedTime),1),Object(a["i"])("div",null,[Object(a["l"])(c,{onClick:e.onClickRunning,isRunning:e.isRunning},null,8,["onClick","isRunning"]),Object(a["l"])(u,{label:"通過",class:"p-button-info",onClick:e.onClickPassing,disabled:!e.isRunning},null,8,["onClick","disabled"])]),Object(a["i"])("div",null,[Object(a["l"])(u,{label:"タイマー止",class:"p-button-warning",onClick:e.allStop,disabled:!e.isStarted},null,8,["onClick","disabled"]),Object(a["l"])(u,{label:"リセット",class:"p-button-danger",onClick:e.reset,disabled:!e.isStarted},null,8,["onClick","disabled"])]),Object(a["i"])("p",null,"ゲーム内所要時間(分): "+Object(a["K"])(e.recordedRap),1)]})),_:1})}var D=n("2909");n("99af");function I(e,t,n,i,o,r){var l=Object(a["G"])("Button");return Object(a["y"])(),Object(a["f"])(l,{onClick:e.onClick,class:Object(a["s"])(e.buttonRunningClass),disabled:e.disabled},{default:Object(a["Q"])((function(){return[Object(a["i"])("span",{class:Object(a["s"])(e.buttonRunningIcon)},null,2),Object(a["k"])(Object(a["K"])(e.buttonRunningLabel),1)]})),_:1},8,["onClick","class","disabled"])}var x=Object(a["m"])({name:"MeasureNecessaryTimeRunningButton",props:{onClickRunning:Function,onClickPassing:Function,isRunning:Boolean,isPass:Boolean,class:String,disabled:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["d"])((function(){return e.isRunning?e.isPass?"通過":"停車":"発車"})),n=Object(a["d"])((function(){return e.isRunning?e.isPass?"通過":"停車":"発車"})),i=Object(a["d"])((function(){var e="mx-1 pi";switch(t.value){case"通過":return e+" pi-fast-forward";case"停車":return e+" pi-pause";case"発車":default:return e+" pi-play"}})),o=Object(a["d"])((function(){var n=e.class+" flex justify-content-center ";switch(t.value){case"通過":return n+"p-button-secondary";case"停車":return n+"p-button-success";case"発車":default:return n}})),r=Object(a["d"])((function(){switch(t.value){case"通過":return e.onClickPassing;case"停車":case"発車":default:return e.onClickRunning}}));return{buttonRunningLabel:n,buttonRunningIcon:i,buttonRunningClass:o,onClick:r}}});const w=r()(x,[["render",I]]);var k=w,_="YYYY-MM-DD HH:mm",C=[{label:"ワインレッド",value:"#842e36"},{label:"オレンジバーミリオン",value:"#c16b49"},{label:"うぐいす",value:"#8fb871"},{label:"エメラルドグリーン",value:"#008d79"},{label:"ブライトブルー",value:"#0c3f71"},{label:"スカイブルー",value:"#008aa2"}],V=[{name:"x1(現実世界用)",value:1},{name:"x3",value:3},{name:"x6",value:6},{name:"x12",value:12},{name:"x30",value:30},{name:"x60",value:60},{name:"x120",value:120},{name:"x450",value:450}],R=[{name:"x0.5",value:.5},{name:"x1",value:1},{name:"x1.5",value:1.5},{name:"x2",value:2},{name:"x2.5",value:2.5},{name:"x3",value:3},{name:"x5",value:5},{name:"x10",value:10}],M=n("d4ec"),B=n("bee2"),L=n("5a0c"),N=n.n(L),A=function(){function e(t){Object(M["a"])(this,e),this.multiplyer=1,this.now=N()("2000-10-14 00:00:00.000"),this.multiplyer=t}return Object(B["a"])(e,[{key:"start",value:function(){var e=this;this.intervalId=setInterval((function(){e.bump()}),10)}},{key:"stop",value:function(){clearInterval(this.intervalId)}},{key:"reset",value:function(){this.now=N()("2000-10-14 00:00:00.000")}},{key:"bump",value:function(){this.now=this.now.add(10*this.multiplyer,"ms")}}]),e}(),P=Object(a["m"])({name:"MeasureNeccesaryTime",components:{MeasureNecessaryTimeRunningButton:k},setup:function(){var e=Object(a["D"])(60),t=Object(a["D"])(10),n=Object(a["D"])(new A(e.value*t.value));Object(a["P"])([e,t],(function(){n.value=new A(e.value*t.value)}));var i,o=Object(a["d"])((function(){return n.value.now.format("HH:mm")})),r=Object(a["D"])(!1),l=Object(a["D"])(!1),c=Object(a["D"])([]),u=function(){r.value=!r.value,l.value||(l.value=!0,n.value.start()),r.value?i=n.value.now:c.value=[].concat(Object(D["a"])(c.value),[N()(n.value.now).diff(i,"minute")])},s=function(){c.value=[].concat(Object(D["a"])(c.value),[N()(n.value.now).diff(i,"minute")]),i=n.value.now},d=function(){r.value=!1,n.value.stop()},b=function(){d(),l.value=!1,c.value=[],n.value.reset()};return{MULTIPLYERS:V,FAST_FORWARDS:R,selectedMultiplyer:e,selectedFastForward:t,recordedRap:c,timer:n,formattedTime:o,onClickRunning:u,onClickPassing:s,allStop:d,reset:b,MeasureNecessaryTimeRunningButton:k,isStarted:l,isRunning:r}}});n("a23e");const F=r()(P,[["render",S],["__scopeId","data-v-3b9bdf89"]]);var G=F,U=(n("d3b7"),n("ddb0"),function(e){return Object(a["B"])("data-v-77d93807"),e=e(),Object(a["z"])(),e}),H={class:"grid p-1"},E={class:"col-12 flex justify-content-between"},Q=U((function(){return Object(a["i"])("h1",{class:"text-lg mb-0"},"DiaGen",-1)})),K={class:"col-12"},W={class:"col-12 md:col-8"},z={class:"flex overflow-x-scroll"},Y={class:"col"};function q(e,t,n,i,o,r){var l,c=Object(a["G"])("DiagramMenu"),u=Object(a["G"])("DiagramStationManager"),s=Object(a["G"])("Panel"),d=Object(a["G"])("Chart"),b=Object(a["G"])("Button"),m=Object(a["G"])("DiagramTrainTypeManager"),f=Object(a["G"])("DiagramTimeTableManager");return Object(a["y"])(),Object(a["h"])("div",H,[Object(a["i"])("div",E,[Q,Object(a["l"])(c)]),Object(a["i"])("div",K,[Object(a["l"])(s,{header:"駅設定",toggleable:!0},{default:Object(a["Q"])((function(){return[Object(a["l"])(u)]})),_:1})]),Object(a["i"])("div",W,[Object(a["l"])(s,{header:"ダイヤグラム",class:"my-2"},{default:Object(a["Q"])((function(){return[Object(a["l"])(d,{type:"line",data:e.data,options:e.graphOptions,ref:"chartRef"},null,8,["data","options"])]})),_:1}),Object(a["l"])(s,{header:"種別と所要時間",class:"my-1 time-table-manager-panel"},{icons:Object(a["Q"])((function(){return[Object(a["l"])(b,{class:"p-button-sm",icon:"pi pi-plus",onClick:e.addInitialTrainType,disabled:!e.canAddTrainType,label:"種別追加"},null,8,["onClick","disabled"])]})),default:Object(a["Q"])((function(){return[Object(a["i"])("div",z,[(Object(a["y"])(!0),Object(a["h"])(a["a"],null,Object(a["E"])(e.trainTypes.keys(),(function(e){return Object(a["y"])(),Object(a["f"])(m,{key:e,trainTypeId:e,class:"col"},null,8,["trainTypeId"])})),128))])]})),_:1})]),Object(a["i"])("div",Y,[Object(a["l"])(f,{diagramDataSetId:e.showingTrainId,refreshChart:null===(l=e.chartRef)||void 0===l?void 0:l.refresh},null,8,["diagramDataSetId","refreshChart"])])])}n("8e16"),n("a4d3"),n("e01a"),n("4ec9"),n("3ca3");var J=n("5502"),X=n("0050"),Z=n.n(X),$=n("5530"),ee=n("b85c"),te=(n("7db0"),n("4de4"),n("caad"),n("2532"),n("d81d"),n("b0c0"),Z()()),ne={getStation:function(e){var t=e.stationList;return function(e){return t.stations.find((function(t){return t.id===e}))}},getShouldRecordTimeStationList:function(e){var t=e.stationList;return t.stations.filter((function(e){return e.shouldRecordTime}))},getTerminalStation:function(e){var t=e.stationList;return{startingStationId:t.startingStationId,endingStationId:t.endingStationId}},getTrainType:function(e){var t=e.trainTypes;return function(e){return t.get(e)}},getTrainTypeByTrainId:function(e){var t=e.trainTypes;return function(e){return Object(D["a"])(t.values()).find((function(t){return t.trainIdList.includes(e)}))}},getChatrJsData:function(e,t){var n,a=e.diagramData,i=e.showingTrainId,o=e.inputtingPreviewDiagramDatas,r=e.isShowPreview,l=te(a),c=Object(ee["a"])(l.datasets);try{for(c.s();!(n=c.n()).done;){var u=n.value;u.borderWidth=u.id===i?2:1;var s,d=Object(ee["a"])(u.data);try{for(d.s();!(s=d.n()).done;){var b,m=s.value;m.name=null===(b=t.getStation(m.stationId))||void 0===b?void 0:b.name}}catch(f){d.e(f)}finally{d.f()}}}catch(f){c.e(f)}finally{c.f()}return r&&l.datasets.push({id:9999,data:o.map((function(e){var n;return Object($["a"])(Object($["a"])({},e),{},{name:null===(n=t.getStation(e.stationId))||void 0===n?void 0:n.name})})),borderColor:"#BBBB00",label:"プレビュー",borderWidth:3}),l},getMinAndMaxTimeOnDiagramData:function(e,t){var n=t.getChatrJsData.datasets.reduce((function(e,t,n){if(0===t.data.length)return e;var a=t.data.length-1;return 0===n||""===e.min&&""===e.max?{min:t.data[0].time,max:t.data[a].time}:{min:N()(t.data[0].time,_).isBefore(N()(e.min,_))?t.data[0].time:e.min,max:N()(t.data[a].time,_).isAfter(N()(e.max,_))?t.data[a].time:e.max}}),{min:"",max:""});return n.min=N()(n.min,_).subtract(15,"minute").format(_),n.max=N()(n.max,_).add(15,"minute").format(_),n},getTrainDiagramDataSetById:function(e){var t=e.diagramData;return function(e){return t.datasets.find((function(t){return t.id===e}))}},getHistoryInfo:function(e){var t=e.__history;return{nowIndex:t?t.nowIndex:0,length:t?t.stack.length:0}}},ae=(n("4e82"),n("a15b"),n("07ac"),n("fb6a"),n("3835")),ie=(n("159b"),Z()()),oe=function(e){return N()(e,_).format("HH:mm")},re=function(e,t){return N()(e,_).add(t,"minute").format(_)},le=function(e,t){var n=N()(e,_),a=n.get("minute"),i=0===t?60:t,o=i;while(a>=o)o+=i;return n.minute(o).format(_)},ce=function(e){var t,n=e.startTime,a=e.trainType,i=e.startStation,o=e.endStation,r=e.turnCycleTime,l=void 0===r?30:r,c=e.boundFor,u=e.terminalStation,s=n,d=[{stationId:i,time:n}];(function(e){e[e["ONE_WAY"]=0]="ONE_WAY",e[e["ROUND_TRIP_OUTWARD"]=1]="ROUND_TRIP_OUTWARD",e[e["ROUND_TRIP_HOMEWORD"]=2]="ROUND_TRIP_HOMEWORD"})(t||(t={}));var b=function(e,n){var r,c=!1,b=Object(ee["a"])(e);try{for(b.s();!(r=b.n()).done;){var m=Object(ae["a"])(r.value,2),f=m[1];if(f.from!==i&&n!==t.ROUND_TRIP_HOMEWORD||(c=!0),c||f.from===i){if(n!==t.ROUND_TRIP_HOMEWORD||f.from!==u.endingStationId&&f.from!==u.startingStationId||(s=le(s,l),d.push({stationId:f.from,time:s})),s=re(s,f.necessaryTime),d.push({stationId:f.to,time:s}),n!==t.ROUND_TRIP_OUTWARD&&f.to===o||f.to===u.endingStationId||f.to===u.startingStationId)return;a.stoppingStationList.includes(f.to)&&(s=re(s,1),d.push({stationId:f.to,time:s}))}}}catch(p){b.e(p)}finally{b.f()}};switch(c){case"A":b(a.necessaryTimesA,t.ONE_WAY);break;case"B":b(a.necessaryTimesB,t.ONE_WAY);break;case"AB":b(a.necessaryTimesA,t.ROUND_TRIP_OUTWARD),b(a.necessaryTimesB,t.ROUND_TRIP_HOMEWORD);break;case"BA":b(a.necessaryTimesB,t.ROUND_TRIP_OUTWARD),b(a.necessaryTimesA,t.ROUND_TRIP_HOMEWORD);break}return d},ue=function(e,t){var n,a=new Map,i=ie(e.stations);"B"===t&&i.reverse();var o=null===(n=i[0])||void 0===n?void 0:n.id;return i.forEach((function(e,t){if(0!==t&&e.shouldRecordTime){var n="".concat(o,"-").concat(e.id),i={id:n,from:o,to:e.id,necessaryTime:0};a.set(n,i),o=e.id}})),a},se=function(e){var t=Object(D["a"])(e.values()).map((function(e){return e.lineColor})),n=C.filter((function(e){return!t.includes(e.value)}));return n[Math.floor(Math.random()*n.length)]},de=function(e,t,n){if(0===t)return ie(e);var a=1;a="forward"===n?1:-1;var i=t*a;return e.map((function(e){var t={stationId:e.stationId,time:N()(e.time,_).add(i,"minute").format(_)};return e.name&&(t.name=e.name),t}))},be=n("9f6a"),me=n.n(be),fe=n("53ca"),pe=(n("a630"),function(e){return JSON.stringify(e,(function(e,t){return t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t}))}),ve=function(e){return JSON.parse(e,(function(e,t){return"object"===Object(fe["a"])(t)&&null!==t&&"Map"===t.dataType?new Map(t.value):t}))},Oe=Z()(),je=function(e,t){var n=Oe(t);e.__history?Object.assign(e,Object.assign(t,{__history:{stack:e.__history.stack.concat(n),nowIndex:e.__history.nowIndex}})):Object.assign(e,Object.assign(t,{__history:{stack:[],nowIndex:0}}))},ge={updateStationList:function(e,t){e.diagramData.labels=t.filter((function(e){return e.shouldRecordTime})).map((function(e){return e.name})),e.stationList.stations=t,e.stationList.startingStationId=t[0].id,e.stationList.endingStationId=t[t.length-1].id,e.__chartRefresh()},updateTrainTypeNecessaryTimeTable:function(e,t){var n=t.trainTypeId,a=t.boundFor,i=t.newNecessaryTimeMap,o=e.trainTypes.get(n);o&&("A"===a?o.necessaryTimesA=i:o.necessaryTimesB=i)},updateDiagramData:function(e,t){var n=t.id,a=t.data,i=e.diagramData.datasets.find((function(e){return e.id===n}));function o(e){return Object(D["a"])(new Map(e.map((function(e){return[Object.values(e).join(),e]}))).values())}i&&(i.data=o(a).sort((function(e,t){return N()(e.time,_).isBefore(N()(t.time,_))?-1:1})))},setShowingTrainId:function(e,t){var n=t.id;e.showingTrainId=n},addInitialTrainType:function(e){var t=Math.max.apply(Math,Object(D["a"])(e.trainTypes.keys()).concat([0]))+1,n={id:t,name:"種別".concat(t),trainIdList:[],stoppingStationList:e.stationList.stations.map((function(e){return e.id})),necessaryTimesA:ue(e.stationList,"A"),necessaryTimesB:ue(e.stationList,"B"),lineColor:se(e.trainTypes).value};e.trainTypes.set(t,n)},updateTrainType:function(e,t){var n=t.id,a=t.data;e.trainTypes.set(n,a)},addTrain:function(e,t){var n=t.trainTypeId,a=t.trainId,i=e.trainTypes.get(n);if(i){i.trainIdList.push(a);var o="".concat(i.name,"-").concat(i.trainIdList.length);e.diagramData.datasets.push({label:o,id:a,data:[],borderColor:i.lineColor}),e.diagramData.datasets.sort((function(e,t){return e.label<t.label?-1:e.label>t.label||0===e.data.length&&0!==t.data.length?1:0===t.data.length&&0!==e.data.length?-1:1})),e.showingTrainId=a}},incrementTrainId:function(e){e.nextTrainId++},setChartRefresh:function(e,t){var n=t.chartRefresh;e.__chartRefresh=n},__updateLineColorAndTrainName:function(e,t){var n=t.trainTypeId,a=e.trainTypes.get(n);if(a){var i,o=1,r=Object(ee["a"])(e.diagramData.datasets);try{for(r.s();!(i=r.n()).done;){var l=i.value;a.trainIdList.includes(l.id)&&(l.borderColor=a.lineColor,l.label="".concat(a.name,"-").concat(o++))}}catch(c){r.e(c)}finally{r.f()}}},__logHistory:function(e){var t=Oe(e);delete t.__history,e.__history&&(me()(e.__history.stack[e.__history.nowIndex],t)||(e.__history.stack=e.__history.stack.slice(0,e.__history.nowIndex+1),e.__history.stack.push(t),e.__history.stack.length>100&&e.__history.stack.shift(),e.__history.nowIndex=e.__history.stack.length-1,delete t.__saveId,localStorage.setItem(String(e.__saveId),pe(t))))},undo:function(e){if(e.__history&&0!==e.__history.stack.length&&0!==e.__history.nowIndex){var t=Oe(e.__history.stack[e.__history.nowIndex-1]);Object.assign(e,Object.assign(t,{__history:{stack:e.__history.stack,nowIndex:e.__history.nowIndex-1}}))}},redo:function(e){if(e.__history&&0!==e.__history.stack.length){var t=Oe(e.__history.stack[e.__history.nowIndex+1]);Object.assign(e,Object.assign(t,{__history:{stack:e.__history.stack,nowIndex:e.__history.nowIndex+1}}))}},loadData:function(e,t){var n=t.id,a=localStorage.getItem(String(n));if(a){var i=ve(a);je(e,i)}else{var o=Oe(De);je(e,o)}},initialize:function(e){var t=Oe(De);je(e,t)},setSaveId:function(e,t){var n=t.id;e.__saveId=n},updateInputtingPreviewDiagramDatas:function(e,t){var n=t.data;e.inputtingPreviewDiagramDatas=n},updateIsShowPreview:function(e,t){var n=t.value;e.isShowPreview=n}},ye=Z()(),he={addTrain:function(e,t){var n=t.trainTypeId,a=e.state.nextTrainId;e.commit("addTrain",{trainTypeId:n,trainId:a}),e.commit("incrementTrainId"),e.commit("__logHistory")},addInitialTrainType:function(e){e.commit("addInitialTrainType");var t=Math.max.apply(Math,Object(D["a"])(e.state.trainTypes.keys()));e.dispatch("addTrain",{trainTypeId:t})},updateTrainType:function(e,t){e.commit("updateTrainType",t),e.commit("__updateLineColorAndTrainName",{trainTypeId:t.id}),e.state.__chartRefresh(),e.commit("__logHistory")},updateTrainTypeNecessaryTimeTable:function(e,t){e.commit("updateTrainTypeNecessaryTimeTable",t),e.commit("__logHistory")},updateDiagramData:function(e,t){e.commit("updateDiagramData",t),e.commit("__logHistory")},updateStationList:function(e,t){e.commit("updateStationList",t),e.state.trainTypes.forEach((function(t,n){var a=ye(t),i=ue(e.state.stationList,"A");i.forEach((function(e,n){var a,i=null===(a=t.necessaryTimesA.get(n))||void 0===a?void 0:a.necessaryTime;i&&(e.necessaryTime=i)})),a.necessaryTimesA=i;var o=ue(e.state.stationList,"B");o.forEach((function(e,n){var a,i=null===(a=t.necessaryTimesB.get(n))||void 0===a?void 0:a.necessaryTime;i&&(e.necessaryTime=i)})),a.necessaryTimesB=o,a.stoppingStationList.push(e.state.stationList.stations[e.state.stationList.stations.length-1].id),e.commit("updateTrainType",{id:n,data:a})})),e.commit("__logHistory")},loadData:function(e,t){e.commit("loadData",t)},initialize:function(e){e.commit("initialize"),e.commit("__logHistory")}},Te=Z()({circles:!0}),Se=Symbol(),De={stationList:{stations:[],startingStationId:0,endingStationId:0},trainTypes:new Map([]),diagramData:{labels:[],datasets:[]},showingTrainId:0,nextTrainId:1,__chartRefresh:function(){},__saveId:1,inputtingPreviewDiagramDatas:[],isShowPreview:!0},Ie=Object(J["a"])({state:Object.assign(Te(De),{__history:{stack:[],nowIndex:0}}),getters:ne,mutations:ge,actions:he,modules:{}}),xe=function(){return Object(J["b"])(Se)},we=n("4344");function ke(e,t,n,i,o,r){var l=Object(a["G"])("DiagramMenuDataSaveManager"),c=Object(a["G"])("Button"),u=Object(a["G"])("SplitButton");return Object(a["y"])(),Object(a["h"])("div",null,[Object(a["l"])(l),Object(a["l"])(c,{label:"戻る",icon:"pi pi-angle-left",class:"mx-1",disabled:!e.canUndo,onClick:e.handleUndo},null,8,["disabled","onClick"]),Object(a["l"])(c,{label:"進む",icon:"pi pi-angle-right",class:"mx-1",disabled:!e.canRedo,onClick:e.handleRedo},null,8,["disabled","onClick"]),Object(a["l"])(u,{label:"ヘルプ",icon:"pi pi-question-circle",class:"mx-1",model:[{label:"状態の初期化",icon:"pi pi-ban",command:e.handleInitialize}]},null,8,["model"])])}function _e(e,t,n,i,o,r){var l=Object(a["G"])("InputNumber");return Object(a["y"])(),Object(a["f"])(l,{modelValue:e.saveId,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.saveId=t}),showButtons:"",buttonLayout:"horizontal",decrementButtonClass:"p-button-danger",incrementButtonClass:"p-button-success",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",mode:"decimal",min:1,max:100,inputClass:"w-4rem text-center"},null,8,["modelValue"])}var Ce=Object(a["m"])({setup:function(){var e=Object(a["D"])(1),t=xe();return Object(a["P"])(e,(function(){t.commit("setSaveId",{id:e.value}),t.dispatch("loadData",{id:e.value})})),{saveId:e}}});const Ve=r()(Ce,[["render",_e]]);var Re=Ve,Me=Object(a["m"])({components:{DiagramMenuDataSaveManager:Re},setup:function(){var e=xe(),t=Object(a["d"])((function(){return e.getters.getHistoryInfo.length>0&&0!==e.getters.getHistoryInfo.nowIndex})),n=Object(a["d"])((function(){return e.getters.getHistoryInfo.length>e.getters.getHistoryInfo.nowIndex+1})),i=function(){e.commit("undo")},o=function(){e.commit("redo")},r=function(){e.dispatch("initialize")};return{canUndo:t,canRedo:n,handleUndo:i,handleRedo:o,handleInitialize:r}}});const Be=r()(Me,[["render",ke]]);var Le=Be,Ne={class:"font-bold"},Ae={class:"formgrid grid"},Pe={class:"field col-6"},Fe=Object(a["i"])("label",{for:"startStation",class:"col-fixed text-sm",style:{display:"block"}}," 発駅 ",-1),Ge={class:"field col-6"},Ue=Object(a["i"])("label",{for:"endStation",class:"col-fixed text-sm",style:{display:"block"}}," 着駅 ",-1),He={class:"field col-4"},Ee=Object(a["i"])("label",{for:"boundFor",class:"col-fixed text-sm",style:{display:"block"}}," 方面 ",-1),Qe={class:"field col-4 p-0"},Ke=Object(a["i"])("label",{for:"next-nextDepartureTime",class:"col-fixed text-sm",style:{display:"block"}}," 次発 ",-1),We={class:"field col-4"},ze=Object(a["i"])("label",{for:"turn-cycle-nextDepartureTime",class:"col-fixed text-sm p-0",style:{display:"block"}},[Object(a["k"])(" 折返周期"),Object(a["i"])("span",{class:"text-xs"},"(分)")],-1),Ye=Object(a["i"])("label",{for:"isShowPreview"},"プレビューを表示する",-1);function qe(e,t,n,i,o,r){var l=Object(a["G"])("Dropdown"),c=Object(a["G"])("Calendar"),u=Object(a["G"])("InputNumber"),s=Object(a["G"])("Checkbox"),d=Object(a["G"])("SplitButton"),b=Object(a["G"])("DiagramTimeTableManagerCopyFromOtherTrain"),m=Object(a["G"])("DiagramTimeTableManagerTable"),f=Object(a["G"])("Panel");return Object(a["y"])(),Object(a["f"])(f,{header:"時刻",class:"my-2"},{icons:Object(a["Q"])((function(){return[]})),default:Object(a["Q"])((function(){var n;return[e.selectedDiagramDataSet?(Object(a["y"])(),Object(a["h"])(a["a"],{key:0},[Object(a["i"])("p",Ne,[Object(a["i"])("span",{style:Object(a["t"])({color:null===(n=e.trainType)||void 0===n?void 0:n.lineColor})},"■",4),Object(a["k"])(" "+Object(a["K"])(e.selectedDiagramDataSet.label),1)]),Object(a["i"])("div",Ae,[Object(a["i"])("div",Pe,[Fe,Object(a["l"])(l,{id:"startStation",modelValue:e.startStation,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.startStation=t}),options:e.shouldRecordTimeStoppingStationList,optionLabel:"name",optionValue:"id",class:"w-10 text-left"},null,8,["modelValue","options"])]),Object(a["i"])("div",Ge,[Ue,Object(a["l"])(l,{id:"endStation",modelValue:e.endStation,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.endStation=t}),options:e.endStationOptions,optionLabel:"name",optionValue:"id",optionDisabled:"disabled",class:"w-10 text-left"},null,8,["modelValue","options"])]),Object(a["i"])("div",He,[Ee,Object(a["l"])(l,{id:"boundFor",modelValue:e.boundFor,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.boundFor=t}),options:e.boundForOptions,optionLabel:"key",optionValue:"key",optionDisabled:"disabled",class:"w-10 text-left"},null,8,["modelValue","options"])]),Object(a["i"])("div",Qe,[Ke,Object(a["l"])(c,{id:"next-nextDepartureTime",timeOnly:!0,hourFormat:"24",modelValue:e.nextDepartureTime,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.nextDepartureTime=t}),class:"w-10"},null,8,["modelValue"])]),Object(a["i"])("div",We,[ze,Object(a["l"])(u,{id:"turn-cycle-nextDepartureTime",mode:"decimal",min:1,modelValue:e.turnCycleTime,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.turnCycleTime=t}),class:"w-10"},null,8,["modelValue"])])]),Object(a["i"])("div",null,[Object(a["l"])(s,{id:"isShowPreview",binary:"",modelValue:e.isShowPreview,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.isShowPreview=t})},null,8,["modelValue"]),Ye]),Object(a["l"])(d,{label:"ふやす",onClick:e.add,class:"p-button-sm my-2",model:[{label:"別列車からコピー",icon:"pi pi-copy",command:e.copyFrom}]},null,8,["onClick","model"]),Object(a["l"])(b,{visible:e.isVisibleCopyModal,"onUpdate:visible":t[6]||(t[6]=function(t){return e.isVisibleCopyModal=t}),diagramDataSet:e.selectedDiagramDataSet},null,8,["visible","diagramDataSet"]),Object(a["l"])(m,{modelValue:e.selectedDiagramDataSetData,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.selectedDiagramDataSetData=t})},null,8,["modelValue"])],64)):Object(a["g"])("",!0)]})),_:1})}n("a9e3");function Je(e,t,n,i,o,r){var l=Object(a["G"])("Column"),c=Object(a["G"])("DiagramTimeTableManagerTimeEditor"),u=Object(a["G"])("Button"),s=Object(a["G"])("Checkbox"),d=Object(a["G"])("DataTable");return Object(a["y"])(),Object(a["f"])(d,{value:e.copy,scrollable:!0,editMode:"cell",onCellEditComplete:e.onCellEditComplete,scrollHeight:"50vh",class:"p-datatable-sm",rowClass:e.rowClass},{default:Object(a["Q"])((function(){return[Object(a["l"])(l,{field:"station",header:"駅"},{body:Object(a["Q"])((function(t){return[Object(a["k"])(Object(a["K"])(e.getStationName(t.data.stationId)),1)]})),_:1}),Object(a["l"])(l,{field:"time",header:"時刻"},{body:Object(a["Q"])((function(t){return[Object(a["k"])(Object(a["K"])(e.formatDdHhmmToHhmm(t.data.time)),1)]})),editor:Object(a["Q"])((function(e){return[Object(a["l"])(c,{modelValue:e.data["time"],"onUpdate:modelValue":function(t){return e.data["time"]=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(a["l"])(l,{class:"max-w-min"},{header:Object(a["Q"])((function(){return[Object(a["l"])(u,{icon:"pi pi-trash",class:"p-button-warning p-button-sm",onClick:e.deleteTime},null,8,["onClick"])]})),body:Object(a["Q"])((function(t){return[Object(a["l"])(s,{modelValue:e.checkBoxesForDelete[t.index],"onUpdate:modelValue":function(n){return e.checkBoxesForDelete[t.index]=n},binary:!0,onInput:function(n){return e.onChangeCheckbox(t.index,n)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]})),_:1})]})),_:1},8,["value","onCellEditComplete","rowClass"])}function Xe(e,t,n,i,o,r){var l=Object(a["G"])("Calendar");return Object(a["y"])(),Object(a["f"])(l,{timeOnly:!0,hourFormat:"24",modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.date=t}),inline:!0},null,8,["modelValue"])}var Ze=Object(a["m"])({props:{modelValue:String},emits:["update:modelValue"],setup:function(e,t){var n=Object(a["d"])({get:function(){return N()(e.modelValue,_).toDate()},set:function(e){t.emit("update:modelValue",N()(e).format(_))}});return{date:n}}});const $e=r()(Ze,[["render",Xe]]);var et=$e,tt=Z()(),nt=Object(a["m"])({components:{DiagramTimeTableManagerTimeEditor:et},props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup:function(e,t){var n=xe(),i=Object(a["d"])((function(){return function(e){var t;return null===(t=n.getters.getStation(e))||void 0===t?void 0:t.name}})),o=Object(a["D"])(tt(e.modelValue)),r=Object(a["D"])(e.modelValue.map((function(){return!1})));Object(a["P"])((function(){return e.modelValue}),(function(){o.value=tt(e.modelValue)}));var l=function(n){var a=N()(e.modelValue[n.index].time,_),i=N()(n.data.time,_),r=i.diff(a,"minutes");o.value.forEach((function(e,t){t<=n.index||(e.time=N()(e.time,_).add(r,"minutes").format(_))})),t.emit("update:modelValue",o.value)},c=function(e,t){if(t)for(var n=!1,a=0;a<r.value.length;a++){if(a===e){r.value[a]=t;break}!n&&r.value[a]&&(n=!0),n&&(r.value[a]=t)}else for(var i=e;i<r.value.length;i++){if(i>e&&!r.value[i])break;r.value[i]=t}},u=function(){r.value=e.modelValue.map((function(){return!1}))},s=function(){t.emit("update:modelValue",o.value.filter((function(e,t){return!r.value[t]}))),u()},d=function(e){return e.stationId===n.state.stationList.startingStationId?"bg-cyan-50":e.stationId===n.state.stationList.endingStationId?"bg-orange-50":null};return{getStationName:i,formatDdHhmmToHhmm:oe,copy:o,onCellEditComplete:l,checkBoxesForDelete:r,onChangeCheckbox:c,deleteTime:s,rowClass:d}}});const at=r()(nt,[["render",Je]]);var it=at,ot=function(e){return Object(a["B"])("data-v-56249ef2"),e=e(),Object(a["z"])(),e},rt=ot((function(){return Object(a["i"])("p",{class:"text-sm"}," 別列車から時刻表をコピーしてきます。時間をずらせます。パターンダイヤを組むのに便利です。 ",-1)})),lt=Object(a["k"])(" コピー先: "),ct={class:"font-bold"},ut={class:"formgrid grid"},st={class:"field col-6"},dt=ot((function(){return Object(a["i"])("label",{for:"train-from"},"コピー元",-1)})),bt={key:0},mt={class:"field col"},ft=ot((function(){return Object(a["i"])("label",{for:"offset"},"オフセット(分)",-1)})),pt={class:"field col"},vt=ot((function(){return Object(a["i"])("label",{for:"offset-to"},"ずらす向き",-1)}));function Ot(e,t,n,i,o,r){var l=Object(a["G"])("Dropdown"),c=Object(a["G"])("InputNumber"),u=Object(a["G"])("Button"),s=Object(a["G"])("Dialog");return Object(a["y"])(),Object(a["f"])(s,{header:"別の列車からコピー",modal:!0,dismissableMask:!0,visible:e.localVisible,"onUpdate:visible":t[3]||(t[3]=function(t){return e.localVisible=t}),onShow:e.initialize,class:"dttmcfot-dialog"},{footer:Object(a["Q"])((function(){return[Object(a["l"])(u,{label:"確定",onClick:e.onClick},null,8,["onClick"])]})),default:Object(a["Q"])((function(){return[rt,Object(a["i"])("p",null,[lt,Object(a["i"])("span",{style:Object(a["t"])({color:e.diagramDataSet.borderColor}),class:"font-bold"},"■",4),Object(a["i"])("span",ct,Object(a["K"])(e.diagramDataSet.label),1)]),Object(a["i"])("div",ut,[Object(a["i"])("div",st,[dt,Object(a["l"])(l,{id:"train-from",class:"inputfield w-full input",modelValue:e.selectedTrainFromTrain,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedTrainFromTrain=t}),options:e.diagramDataSets.filter((function(t){return t.id!==e.diagramDataSet.id&&t.data.length})),optionLabel:"label",placeholder:"コピー元を選ぶ",filter:!0},{value:Object(a["Q"])((function(t){return[t.value?(Object(a["y"])(),Object(a["h"])("span",bt,[Object(a["i"])("span",{style:Object(a["t"])({color:t.value.borderColor})},"■",4),Object(a["i"])("span",null,Object(a["K"])(t.value.label),1),Object(a["k"])(" / "+Object(a["K"])(t.value.data[0].name)+" "+Object(a["K"])(e.formatDdHhmmToHhmm(t.value.data[0].time))+"発 ",1)])):Object(a["g"])("",!0)]})),option:Object(a["Q"])((function(t){return[Object(a["i"])("span",{style:Object(a["t"])({color:t.option.borderColor})},"■",4),Object(a["i"])("span",null,Object(a["K"])(t.option.label),1),Object(a["k"])(" / "+Object(a["K"])(t.option.data[0].name)+" "+Object(a["K"])(e.formatDdHhmmToHhmm(t.option.data[0].time))+"発 ",1)]})),_:1},8,["modelValue","options"])]),Object(a["i"])("div",mt,[ft,Object(a["l"])(c,{id:"offset",class:"inputfield w-full input",modelValue:e.offset,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.offset=t})},null,8,["modelValue"])]),Object(a["i"])("div",pt,[vt,Object(a["l"])(l,{id:"offset-to",class:"inputfield w-full input",modelValue:e.selectedDirection,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedDirection=t}),options:e.directions,optionLabel:"name"},null,8,["modelValue","options"])])])]})),_:1},8,["visible","onShow"])}var jt=Object(a["m"])({props:{diagramDataSet:{type:Object,required:!0},visible:{type:Boolean,required:!0}},emits:["update:visible"],setup:function(e,t){var n=xe(),i=Object(a["d"])((function(){return n.getters.getChatrJsData.datasets})),o=Object(a["D"])(),r=Object(a["D"])(0),l=[{name:"後→",code:"forward"},{name:"←前",code:"back"}],c=Object(a["D"])(l[0]),u=Object(a["d"])({get:function(){return e.visible},set:function(e){t.emit("update:visible",e)}}),s=function(){if(o.value){var t=de(o.value.data,r.value,c.value.code);n.dispatch("updateDiagramData",{id:e.diagramDataSet.id,data:t}),u.value=!1}},d=function(){r.value=0,c.value=l[0],o.value=void 0};return{localVisible:u,onClick:s,initialize:d,diagramDataSets:i,selectedTrainFromTrain:o,offset:r,selectedDirection:c,directions:l,formatDdHhmmToHhmm:oe}}});n("22cf"),n("f414");const gt=r()(jt,[["render",Ot],["__scopeId","data-v-56249ef2"]]);var yt=gt,ht=Object(a["m"])({components:{DiagramTimeTableManagerTable:it,DiagramTimeTableManagerCopyFromOtherTrain:yt},props:{diagramDataSetId:{type:Number,default:void 0},refreshChart:Function},setup:function(e){var t,n,i,o,r=Object(a["D"])(),l=Object(a["D"])(30),c=Object(a["D"])([{key:"A",disabled:!1},{key:"B",disabled:!1}]),u=Object(a["D"])("A"),s=xe(),d=Object(a["d"])((function(){return s.state.stationList})),b=Object(a["d"])((function(){return s.getters.getShouldRecordTimeStationList.filter((function(e){var t;return null===(t=m.value)||void 0===t?void 0:t.stoppingStationList.includes(e.id)}))})),m=Object(a["d"])((function(){return s.getters.getTrainTypeByTrainId(e.diagramDataSetId||0)})),f=Object(a["d"])((function(){var e,t;return{backgroundColor:null===(e=m.value)||void 0===e?void 0:e.lineColor,borderColor:null===(t=m.value)||void 0===t?void 0:t.lineColor}})),p=Object(a["d"])((function(){return s.getters.getTrainDiagramDataSetById(e.diagramDataSetId||-1)})),v=Object(a["d"])({get:function(){var e;return null===(e=p.value)||void 0===e?void 0:e.data},set:function(e){e&&s.dispatch("updateDiagramData",{id:T.value,data:e})}}),O=Object(a["D"])(null!==(t=v.value)&&void 0!==t&&t.length?v.value[v.value.length-1].stationId:null===(n=b.value[0])||void 0===n?void 0:n.id),j=Object(a["D"])(null===(i=b.value[b.value.length-1])||void 0===i?void 0:i.id),g=Object(a["d"])((function(){return b.value.map((function(e){return Object($["a"])(Object($["a"])({},e),{},{disabled:e.id===O.value})}))})),y=Object(a["d"])((function(){var e;return null!==(e=v.value)&&void 0!==e&&e.length?v.value[v.value.length-1]:void 0}));r.value=null!==(o=v.value)&&void 0!==o&&o.length?N()(le(v.value[v.value.length-1].time,l.value),_).toDate():N()("2021-10-14 04:30:00").toDate();var h=function(e){if(e){r.value=N()(le(e.time,l.value),_).toDate();var t=[e.stationId,n(e)];switch(O.value=t[0],j.value=t[1],u.value){case"A":break;case"B":break;case"AB":case"BA":default:break}}function n(e){return e.stationId===d.value.startingStationId?d.value.endingStationId:e.stationId===d.value.endingStationId?d.value.startingStationId:"A"===u.value?d.value.endingStationId:"B"===u.value?d.value.startingStationId:d.value.endingStationId}};Object(a["P"])((function(){return e.diagramDataSetId}),(function(){y.value?h(y.value):(O.value=d.value.startingStationId,j.value=d.value.endingStationId,r.value=N()("2021-10-14 04:30",_).toDate())})),Object(a["P"])(y,(function(e){h(e)})),Object(a["P"])(l,(function(e){e&&y.value&&(r.value=N()(le(y.value.time,e),_).toDate())})),Object(a["P"])(O,(function(e){switch(e){case d.value.startingStationId:c.value.forEach((function(e){"A"!==e.key[0]?e.disabled=!0:e.disabled=!1})),u.value="A";break;case d.value.endingStationId:c.value.forEach((function(e){"B"!==e.key[0]?e.disabled=!0:e.disabled=!1})),u.value="B";break;default:c.value.forEach((function(e){"A"!==e.key[0]&&(e.disabled=!1)}));break}})),Object(a["P"])(j,(function(e){if(e===d.value.startingStationId||e===d.value.endingStationId)switch(O.value){case d.value.startingStationId:u.value="A";break;case d.value.endingStationId:u.value="B";break;default:}}));var T=Object(a["d"])((function(){return s.state.showingTrainId})),S=Object(a["d"])((function(){if(!m.value)return[];if(!p.value)return[];var e=ce({startTime:N()(r.value).format(_),trainType:m.value,startStation:O.value,endStation:j.value,boundFor:u.value,terminalStation:s.getters.getTerminalStation,turnCycleTime:l.value});return p.value.data.length?[p.value.data[p.value.data.length-1]].concat(Object(D["a"])(e)):e})),I=Object(a["d"])({get:function(){return s.state.isShowPreview},set:function(){s.commit("updateIsShowPreview",{value:!I.value})}});Object(a["P"])(S,(function(e){s.commit("updateInputtingPreviewDiagramDatas",{data:e})}));var x=function(){v.value&&m.value&&(s.dispatch("updateDiagramData",{id:T.value,data:v.value.length?[].concat(Object(D["a"])(v.value),Object(D["a"])(S.value)):S.value}),e.refreshChart&&e.refreshChart())},w=Object(a["D"])(!1),k=function(){w.value=!0};return{trainType:m,nextDepartureTime:r,turnCycleTime:l,startStation:O,endStation:j,endStationOptions:g,shouldRecordTimeStoppingStationList:b,buttonColorStyle:f,boundForOptions:c,boundFor:u,selectedDiagramDataSet:p,selectedDiagramDataSetData:v,add:x,isVisibleCopyModal:w,copyFrom:k,previewData:S,isShowPreview:I}}});n("c5b9");const Tt=r()(ht,[["render",qe]]);var St=Tt,Dt={class:"flex align-content-center h-2rem"},It={class:"font-bold"},xt={key:0,class:"flex justify-content-center flex-wrap trainIdButton"};function wt(e,t,n,i,o,r){var l=Object(a["G"])("Dropdown"),c=Object(a["G"])("InputText"),u=Object(a["G"])("Inplace"),s=Object(a["G"])("SplitButton"),d=Object(a["G"])("DiagramTrainTypeManagerStopStationManager"),b=Object(a["G"])("DiagramTrainTypeManagerNecessaryTimeManager"),m=Object(a["G"])("Button"),f=Object(a["G"])("DiagramTrainTypeNecessaryTimeTable"),p=Object(a["G"])("Panel");return Object(a["y"])(),Object(a["f"])(p,{class:"panel"},{header:Object(a["Q"])((function(){return[Object(a["i"])("div",Dt,[Object(a["l"])(u,{closable:!0,class:"flex align-items-stretch",onClose:e.changeLineColorAndTypeName},{display:Object(a["Q"])((function(){var t,n;return[Object(a["i"])("span",{style:Object(a["t"])({color:null===(t=e.trainType)||void 0===t?void 0:t.lineColor})},"■",4),Object(a["i"])("span",It,Object(a["K"])((null===(n=e.trainType)||void 0===n?void 0:n.name)||"種別名"),1)]})),content:Object(a["Q"])((function(){return[Object(a["l"])(l,{options:e.LINE_COLORS,optionLabel:"label",optionValue:"value",placeholder:"線の色",modelValue:e.lineColor,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.lineColor=t}),class:"w-4rem"},{value:Object(a["Q"])((function(e){return[e.value?(Object(a["y"])(),Object(a["h"])("span",{key:0,style:Object(a["t"])({color:e.value})},"■",4)):(Object(a["y"])(),Object(a["h"])(a["a"],{key:1},[Object(a["k"])(Object(a["K"])(e.placeholder),1)],64))]})),option:Object(a["Q"])((function(e){return[Object(a["i"])("span",{style:Object(a["t"])({color:e.option.value})},"■",4),Object(a["k"])(" "+Object(a["K"])(e.option.label),1)]})),_:1},8,["options","modelValue"]),Object(a["l"])(c,{modelValue:e.typeName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.typeName=t}),placeholder:"種別",class:"w-5rem"},null,8,["modelValue"])]})),_:1},8,["onClose"])])]})),icons:Object(a["Q"])((function(){return[Object(a["l"])(s,{label:"編成+",class:"p-button-sm p-button-secondary split-button",onClick:e.addTrain,model:e.splitButtonItems},null,8,["onClick","model"]),Object(a["l"])(d,{visible:e.isVisibleStopStationManagerModal,"onUpdate:visible":t[2]||(t[2]=function(t){return e.isVisibleStopStationManagerModal=t}),trainType:e.trainType,"onUpdate:trainType":t[3]||(t[3]=function(t){return e.trainType=t})},null,8,["visible","trainType"]),Object(a["l"])(b,{visible:e.isVisibleMeasureNecessaryTimeDialog,"onUpdate:visible":t[4]||(t[4]=function(t){return e.isVisibleMeasureNecessaryTimeDialog=t}),trainType:e.trainType,"onUpdate:trainType":t[5]||(t[5]=function(t){return e.trainType=t})},null,8,["visible","trainType"])]})),default:Object(a["Q"])((function(){return[e.trainType?(Object(a["y"])(),Object(a["h"])("div",xt,[(Object(a["y"])(!0),Object(a["h"])(a["a"],null,Object(a["E"])(e.trainType.trainIdList,(function(t,n){return Object(a["y"])(),Object(a["f"])(m,{class:"m-1 p-button-sm",key:t,onClick:function(n){return e.changeTrainId(t)},style:Object(a["t"])(e.buttonColorStyle)},{default:Object(a["Q"])((function(){return[Object(a["k"])(Object(a["K"])(n+1),1)]})),_:2},1032,["onClick","style"])})),128))])):Object(a["g"])("",!0),Object(a["l"])(f,{modelValue:e.necessaryTimesA,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.necessaryTimesA=t}),boundFor:"A"},null,8,["modelValue"]),Object(a["l"])(f,{modelValue:e.necessaryTimesB,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.necessaryTimesB=t}),boundFor:"B"},null,8,["modelValue"])]})),_:1})}function kt(e,t,n,i,o,r){var l=Object(a["G"])("Column"),c=Object(a["G"])("InputNumber"),u=Object(a["G"])("DataTable");return Object(a["y"])(),Object(a["f"])(u,{value:e.necessaryTimeArray,class:"my-1 p-datatable-sm min-w-max max-w-full",editMode:e.editable?"cell":null,onCellEditComplete:e.onCellEditComplete},{header:Object(a["Q"])((function(){return[Object(a["k"])(Object(a["K"])("".concat(e.boundFor,"線")),1)]})),footer:Object(a["Q"])((function(){return[Object(a["k"])(" 合計"+Object(a["K"])(e.necessaryTimeArray.reduce((function(e,t){return e+t.necessaryTime}),0))+"分 ",1)]})),default:Object(a["Q"])((function(){return[Object(a["l"])(l,{field:"from",header:"発",class:"w-4 max-w-0"},{body:Object(a["Q"])((function(t){return[Object(a["k"])(Object(a["K"])(e.getStationName(t.data.from)),1)]})),_:1}),Object(a["l"])(l,{field:"to",header:"着",class:"w-4 max-w-0"},{body:Object(a["Q"])((function(t){return[Object(a["k"])(Object(a["K"])(e.getStationName(t.data.to)),1)]})),_:1}),Object(a["l"])(l,{field:"necessaryTime",header:"分",class:"max-w-0"},{editor:Object(a["Q"])((function(e){var t=e.data,n=e.column;return[Object(a["l"])(c,{modelValue:t[n.props.field],"onUpdate:modelValue":function(e){return t[n.props.field]=e},class:"w-3rem"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["value","editMode","onCellEditComplete"])}var _t=Z()(),Ct=Object(a["m"])({props:{modelValue:Object,boundFor:String,editable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup:function(e,t){var n=Object(a["d"])((function(){return e.modelValue?Object(D["a"])(e.modelValue.values()):[]})),i=xe(),o=Object(a["d"])((function(){return function(e){var t;return null===(t=i.getters.getStation(e))||void 0===t?void 0:t.name}})),r=function(n){if(e.modelValue){var a=_t(e.modelValue);a.set(n.data.id,n.data),t.emit("update:modelValue",a)}};return{necessaryTimeArray:n,onCellEditComplete:r,getStationName:o}}});const Vt=r()(Ct,[["render",kt]]);var Rt=Vt,Mt=Object(a["i"])("p",{class:"text-sm"}," 採時駅が停車駅の場合、自動的に1分追加した所要時間で計算します ",-1),Bt={class:"flex justify-content-center"},Lt={class:"inline-flex flex-column"},Nt=["for"];function At(e,t,n,i,o,r){var l=Object(a["G"])("Checkbox"),c=Object(a["G"])("Button"),u=Object(a["G"])("Dialog");return Object(a["y"])(),Object(a["f"])(u,{header:"停車駅設定",modal:!0,dismissableMask:!0,visible:e.localVisible,"onUpdate:visible":t[1]||(t[1]=function(t){return e.localVisible=t}),onHide:e.onHide},{footer:Object(a["Q"])((function(){return[Object(a["l"])(c,{label:"確定",onClick:e.onClick},null,8,["onClick"])]})),default:Object(a["Q"])((function(){return[Mt,Object(a["i"])("div",Bt,[Object(a["i"])("div",Lt,[(Object(a["y"])(!0),Object(a["h"])(a["a"],null,Object(a["E"])(e.stationList,(function(n,i){return Object(a["y"])(),Object(a["h"])("div",{key:n.id,class:"inline-block mb-1"},[Object(a["l"])(l,{id:"station".concat(n.id),value:n.id,key:n.id,modelValue:e.stoppingStationList,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.stoppingStationList=t}),class:"mx-2",disabled:0===i||i===e.stationList.length-1},null,8,["id","value","modelValue","disabled"]),Object(a["i"])("label",{for:"station".concat(n.id)},Object(a["K"])(n.name),9,Nt)])})),128))])])]})),_:1},8,["visible","onHide"])}var Pt=Z()(),Ft=Object(a["m"])({props:{trainType:{type:Object,required:!0},visible:{type:Boolean,required:!0}},emits:["update:trainType","update:visible"],setup:function(e,t){var n=xe(),i=Object(a["d"])((function(){return n.state.stationList.stations})),o=Object(a["D"])(Pt(e.trainType.stoppingStationList||[]));Object(a["P"])((function(){return e.trainType.stoppingStationList}),(function(e){o.value=e}));var r=Object(a["d"])({get:function(){return e.visible},set:function(e){t.emit("update:visible",e)}}),l=function(){var n=Pt(e.trainType);n.stoppingStationList=o.value,t.emit("update:trainType",n),r.value=!1},c=function(){o.value=Pt(e.trainType.stoppingStationList)};return{localVisible:r,stationList:i,stoppingStationList:o,onClick:l,onHide:c}}});const Gt=r()(Ft,[["render",At]]);var Ut=Gt,Ht=function(e){return Object(a["B"])("data-v-7f64a16e"),e=e(),Object(a["z"])(),e},Et=Ht((function(){return Object(a["i"])("p",{class:"text-sm p-4"}," ゲーム内の時間拡張倍率・早回し倍率を選んで、列車の走行に合わせてボタンを押すと、ゲーム内時間でのだいたいの所要時間が測れます。 ",-1)})),Qt={class:"formgrid grid"},Kt={class:"field col-6 text-center"},Wt=Ht((function(){return Object(a["i"])("label",{for:"multiplyers"}," 時間拡張",-1)})),zt={class:"field col-6 text-center"},Yt=Ht((function(){return Object(a["i"])("label",{for:"fast-forward"},"早回し",-1)})),qt={class:"text-center"},Jt={class:"text-4xl"},Xt={class:"font-bold"},Zt={class:"grid text-center text-4xl px-8 my-2"},$t=Ht((function(){return Object(a["i"])("div",{class:"col-12 text-3xl pb-0"},"採時区間",-1)})),en={class:"col pt-0"},tn=Ht((function(){return Object(a["i"])("div",{class:"col pt-0"},[Object(a["i"])("span",{class:"pi pi-angle-double-right"})],-1)})),nn={class:"col pt-0"},an={class:"grid my-2"},on={key:0,class:"col-6 text-6xl text-center"},rn={key:0,class:"text-xl"},ln={key:1,class:"text-xl"},cn=Object(a["k"])(" "+Object(a["K"])(" ")+" "),un={class:"font-bold"},sn=Object(a["k"])(" "+Object(a["K"])(" ")+" "),dn={key:2,class:"text-xl"},bn={key:3,class:"text-xl"},mn={key:1,class:"col-6 text-6xl text-center text-green-800 font-bold"},fn={class:"col-6 text-6xl text-center"},pn={class:"grid my-2"},vn={class:"grid my-2"},On={class:"grid"},jn={class:"col-6"},gn={class:"col-6"};function yn(e,t,n,i,o,r){var l=Object(a["G"])("Dropdown"),c=Object(a["G"])("MeasureNecessaryTimeRunningButton"),u=Object(a["G"])("Button"),s=Object(a["G"])("DiagramTrainTypeNecessaryTimeTable"),d=Object(a["G"])("Dialog");return Object(a["y"])(),Object(a["f"])(d,{visible:e.localVisible,"onUpdate:visible":t[2]||(t[2]=function(t){return e.localVisible=t}),onShow:e.reset,class:"dialog"},{footer:Object(a["Q"])((function(){return[Object(a["l"])(u,{label:"確定",onClick:e.submit},null,8,["onClick"])]})),default:Object(a["Q"])((function(){var n,i,o,r,d;return[Object(a["i"])("div",null,[Et,Object(a["i"])("div",Qt,[Object(a["i"])("div",Kt,[Wt,Object(a["l"])(l,{modelValue:e.selectedMultiplyer,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedMultiplyer=t}),options:e.MULTIPLYERS,optionLabel:"name",optionValue:"value",placeholder:"x3〜x450",id:"multiplyers",disabled:e.isStarted},null,8,["modelValue","options","disabled"])]),Object(a["i"])("div",zt,[Yt,Object(a["l"])(l,{modelValue:e.selectedFastForward,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedFastForward=t}),options:e.FAST_FORWARDS,optionLabel:"name",optionValue:"value",placeholder:"x1〜x3",id:"fast-forward",disabled:e.isStarted},null,8,["modelValue","options","disabled"])])]),Object(a["i"])("div",qt,[Object(a["i"])("div",Jt,[Object(a["i"])("span",{style:Object(a["t"])({color:null===(n=e.trainType)||void 0===n?void 0:n.lineColor})},"■",4),Object(a["i"])("span",Xt,Object(a["K"])((null===(i=e.trainType)||void 0===i?void 0:i.name)||"種別名"),1)])]),Object(a["i"])("div",Zt,[$t,Object(a["i"])("div",en,Object(a["K"])(null===(o=e.getStation(e.nowStationInfo.sectionFrom))||void 0===o?void 0:o.name),1),tn,Object(a["i"])("div",nn,Object(a["K"])(null===(r=e.getStation(e.nowStationInfo.sectionTo))||void 0===r?void 0:r.name),1)]),Object(a["i"])("div",an,[e.nowStationInfo.finish?(Object(a["y"])(),Object(a["h"])("div",mn," 終了 ")):(Object(a["y"])(),Object(a["h"])("div",on,[e.isRunning?(Object(a["y"])(),Object(a["h"])("span",rn,"つぎは")):(Object(a["y"])(),Object(a["h"])("span",ln,"ただいま")),cn,Object(a["i"])("span",un,Object(a["K"])(null===(d=e.getStation(e.nowStationInfo.nextStation))||void 0===d?void 0:d.name),1),sn,e.isRunning?(Object(a["y"])(),Object(a["h"])("span",dn,Object(a["K"])(e.trainType.stoppingStationList.includes(e.nowStationInfo.nextStation)?"停車":"通過"),1)):(Object(a["y"])(),Object(a["h"])("span",bn,"停車中"))])),Object(a["i"])("div",fn,Object(a["K"])(e.formattedTime),1)]),Object(a["i"])("div",null,[Object(a["i"])("div",pn,[Object(a["l"])(c,{onClickRunning:e.onClickRunning,onClickPassing:e.onClickPassing,isRunning:e.isRunning,isPass:!e.trainType.stoppingStationList.includes(e.nowStationInfo.nextStation),disabled:e.nowStationInfo.finish,class:"col mx-1"},null,8,["onClickRunning","onClickPassing","isRunning","isPass","disabled"])]),Object(a["i"])("div",vn,[Object(a["l"])(u,{label:"タイマー止",class:"p-button-warning col mx-1",onClick:e.allStop,disabled:!e.isStarted},null,8,["onClick","disabled"]),Object(a["l"])(u,{label:"リセット",class:"p-button-danger col mx-1",onClick:e.reset,disabled:!e.isStarted},null,8,["onClick","disabled"])])]),Object(a["i"])("div",On,[Object(a["i"])("div",jn,[Object(a["l"])(s,{modelValue:e.recordedRap.a,boundFor:"A",editable:!1},null,8,["modelValue"])]),Object(a["i"])("div",gn,[Object(a["l"])(s,{modelValue:e.recordedRap.b,boundFor:"B",editable:!1},null,8,["modelValue"])])])])]})),_:1},8,["visible","onShow"])}var hn=Z()(),Tn=Object(a["m"])({components:{MeasureNecessaryTimeRunningButton:k,DiagramTrainTypeNecessaryTimeTable:Rt},props:{visible:{type:Boolean,required:!0},trainType:{type:Object,required:!0}},emits:["update:visible","update:trainType"],setup:function(e,t){var n,i=Object(a["d"])({get:function(){return e.visible},set:function(e){t.emit("update:visible",e)}}),o=xe(),r=Object(a["d"])((function(){return o.state.stationList})),l=o.getters.getStation,c=function(e){return r.value.stations.some((function(t){return t.shouldRecordTime&&t.id===e}))},u=Object(a["D"])(60),s=Object(a["D"])(10),d=Object(a["D"])(new A(u.value*s.value));Object(a["P"])([u,s],(function(){d.value=new A(u.value*s.value)}));var b,m=Object(a["d"])((function(){return d.value.now.format("HH:mm")})),f=Object(a["D"])(!1),p=Object(a["D"])(!1),v=Object(a["D"])({a:ue(r.value,"A"),b:ue(r.value,"B")}),O=function(){v.value={a:ue(r.value,"A"),b:ue(r.value,"B")}},j={sectionFrom:1,sectionTo:(null===(n=r.value.stations.find((function(e){return e.shouldRecordTime&&e.id>1})))||void 0===n?void 0:n.id)||0,nextStation:1,forwards:"A",finish:!1},g=Object(a["D"])(hn(j)),y=function(){var e="".concat(g.value.sectionFrom,"-").concat(g.value.sectionTo),t={id:e,from:g.value.sectionFrom,to:g.value.sectionTo,necessaryTime:N()(d.value.now).diff(b,"minute")};"A"===g.value.forwards?v.value.a.set(e,t):v.value.b.set(e,t)},h=function(){var e,t;(g.value.sectionFrom=g.value.sectionTo,g.value.sectionTo===r.value.endingStationId&&(g.value.forwards="B"),"A"===g.value.forwards)?g.value.sectionTo=(null===(e=r.value.stations.find((function(e){return e.shouldRecordTime&&e.id>g.value.sectionFrom})))||void 0===e?void 0:e.id)||0:g.value.sectionTo=(null===(t=Object(D["a"])(r.value.stations).reverse().find((function(e){return e.shouldRecordTime&&e.id<g.value.sectionFrom})))||void 0===t?void 0:t.id)||0},T=function(){"A"===g.value.forwards?g.value.nextStation++:g.value.nextStation--},S=function(){f.value=!f.value,p.value?f.value?(c(g.value.nextStation)&&(h(),b=d.value.now),T()):c(g.value.nextStation)&&(y(),1===g.value.nextStation&&(x(),g.value.finish=!0)):(p.value=!0,d.value.start(),b=d.value.now,T())},I=function(){c(g.value.nextStation)&&(y(),h(),b=d.value.now),T()},x=function(){f.value=!1,d.value.stop()},w=function(){x(),p.value=!1,O(),d.value.reset(),g.value=hn(j)},_=function(){var n=hn(e.trainType);n.necessaryTimesA=hn(v.value.a),n.necessaryTimesB=hn(v.value.b),t.emit("update:trainType",n),i.value=!1};return{localVisible:i,stationList:r,getStation:l,MULTIPLYERS:V,FAST_FORWARDS:R,selectedMultiplyer:u,selectedFastForward:s,recordedRap:v,timer:d,formattedTime:m,onClickRunning:S,onClickPassing:I,allStop:x,reset:w,MeasureNecessaryTimeRunningButton:k,isStarted:p,isRunning:f,nowStationInfo:g,submit:_}}});n("0474");const Sn=r()(Tn,[["render",yn],["__scopeId","data-v-7f64a16e"]]);var Dn=Sn,In=Z()(),xn=Object(a["m"])({props:{trainTypeId:{type:Number,required:!0}},components:{DiagramTrainTypeNecessaryTimeTable:Rt,DiagramTrainTypeManagerStopStationManager:Ut,DiagramTrainTypeManagerNecessaryTimeManager:Dn},setup:function(e){var t,n,i=xe(),o=Object(a["d"])({get:function(){return i.getters.getTrainType(e.trainTypeId||0)},set:function(t){t&&i.dispatch("updateTrainType",{id:e.trainTypeId,data:t})}}),r=Object(a["d"])({get:function(){var e;return null===(e=o.value)||void 0===e?void 0:e.necessaryTimesA},set:function(t){t&&i.dispatch("updateTrainTypeNecessaryTimeTable",{trainTypeId:e.trainTypeId,boundFor:"A",newNecessaryTimeMap:t})}}),l=Object(a["d"])({get:function(){var e;return null===(e=o.value)||void 0===e?void 0:e.necessaryTimesB},set:function(t){t&&i.dispatch("updateTrainTypeNecessaryTimeTable",{trainTypeId:e.trainTypeId,boundFor:"B",newNecessaryTimeMap:t})}}),c=function(e){i.commit("setShowingTrainId",{id:e})},u=Object(a["D"])((null===(t=o.value)||void 0===t?void 0:t.lineColor)||""),s=Object(a["D"])((null===(n=o.value)||void 0===n?void 0:n.name)||""),d=function(t){if(o.value&&(o.value.lineColor!==t.value||o.value.name!==s.value)){var n=In(o.value);n.lineColor=u.value,n.name=s.value,i.dispatch("updateTrainType",{id:e.trainTypeId,data:n})}},b=Object(a["d"])((function(){return{backgroundColor:u.value,borderColor:u.value}})),m=Object(a["D"])(!1),f=function(){o.value&&i.dispatch("addTrain",{trainTypeId:o.value.id})},p=function(){m.value=!0},v=Object(a["D"])(!1),O=function(){v.value=!0},j=Object(a["D"])([{label:"停車駅編集",icon:"pi pi-list",command:p},{label:"所要時間計測",icon:"pi pi-clock",command:O}]);return{trainType:o,lineColor:u,typeName:s,changeTrainId:c,changeLineColorAndTypeName:d,addTrain:f,LINE_COLORS:C,buttonColorStyle:b,necessaryTimesA:r,necessaryTimesB:l,splitButtonItems:j,isVisibleStopStationManagerModal:m,isVisibleMeasureNecessaryTimeDialog:v}}});n("e42a");const wn=r()(xn,[["render",wt],["__scopeId","data-v-927ce3ee"]]);var kn=wn,_n=function(e){return Object(a["B"])("data-v-b4cbebfc"),e=e(),Object(a["z"])(),e},Cn={class:"flex flex-column align-items-center justify-content-center"},Vn={class:"p-inputgroup w-3"},Rn=_n((function(){return Object(a["i"])("p",null,"チェックをつける: 採時駅",-1)})),Mn={class:"station-chart"},Bn={class:"vertical-rl h-5rem"},Ln=_n((function(){return Object(a["i"])("p",{class:"vertical-rl"},"さんぷる",-1)}));function Nn(e,t,n,i,o,r){var l=Object(a["G"])("InputText"),c=Object(a["G"])("Button"),u=Object(a["G"])("Checkbox"),s=Object(a["G"])("Inplace"),d=Object(a["G"])("Timeline");return Object(a["y"])(),Object(a["h"])(a["a"],null,[Object(a["i"])("div",Cn,[Object(a["i"])("div",Vn,[Object(a["l"])(l,{placeholder:"駅名",modelValue:e.newStationName,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.newStationName=t}),onKeydown:t[1]||(t[1]=Object(a["S"])((function(t){return e.onEnter(t.keyCode,e.addStation)}),["enter"]))},null,8,["modelValue"]),Object(a["l"])(c,{icon:"pi pi-plus",onClick:e.addStation,label:"駅追加"},null,8,["onClick"])])]),Rn,Object(a["i"])("div",Mn,[e.stationList.stations.length?(Object(a["y"])(),Object(a["f"])(d,{key:0,value:e.stationList.stations,layout:"horizontal"},{marker:Object(a["Q"])((function(t){return[Object(a["l"])(u,{modelValue:t.item.shouldRecordTime,binary:!0,onChange:function(){return e.changeCheckbox(t.index)}},null,8,["modelValue","onChange"])]})),content:Object(a["Q"])((function(t){return[Object(a["i"])("div",Bn,[Object(a["l"])(s,{closable:!0,onClose:function(){return e.changeStationName(t.index)},active:e.isOpenStationNameChange[t.index],"onUpdate:active":function(n){return e.isOpenStationNameChange[t.index]=n},class:"block"},{display:Object(a["Q"])((function(){return[Object(a["k"])(Object(a["K"])(t.item.name),1)]})),content:Object(a["Q"])((function(){return[Object(a["l"])(l,{modelValue:t.item.name,class:"w-6rem",onInput:e.onChangeStationName,onKeydown:Object(a["S"])((function(n){return e.onEnter(n.keyCode,(function(){return e.changeStationName(t.index)}))}),["enter"])},null,8,["modelValue","onInput","onKeydown"])]})),_:2},1032,["onClose","active","onUpdate:active"])])]})),_:1},8,["value"])):(Object(a["y"])(),Object(a["f"])(d,{key:1,value:[1,2,3],layout:"horizontal"},{content:Object(a["Q"])((function(){return[Ln]})),_:1}))])],64)}var An=Object(a["m"])({setup:function(){var e=xe(),t=Object(a["d"])((function(){return e.state.stationList})),n=Object(a["D"])(""),i=function(){e.dispatch("updateStationList",t.value.stations.concat({id:Math.max.apply(Math,Object(D["a"])(t.value.stations.map((function(e){return e.id}))).concat([0]))+1,name:n.value||String(t.value.stations.length),shouldRecordTime:!0})),n.value=""},o=function(n){var a=t.value.stations.map((function(e,t){return{id:e.id,name:e.name,shouldRecordTime:t===n?!e.shouldRecordTime:e.shouldRecordTime}}));e.dispatch("updateStationList",a)},r=Object(a["D"])([]),l=Object(a["D"])(""),c=function(e){l.value=e.target.value},u=function(n){var a=t.value.stations.map((function(e,t){return{id:e.id,name:t===n?l.value||e.name||String(t):e.name,shouldRecordTime:e.shouldRecordTime}}));e.dispatch("updateStationList",a),r.value[n]=!1},s=function(e,t){13===e&&t()};return{stationList:t,newStationName:n,addStation:i,onEnter:s,changeCheckbox:o,isOpenStationNameChange:r,changeStationName:u,onChangeStationName:c}}});n("40fb");const Pn=r()(An,[["render",Nn],["__scopeId","data-v-b4cbebfc"]]);var Fn=Pn,Gn=Object(a["m"])({components:{Chart:we["a"],DiagramMenu:Le,DiagramTimeTableManager:St,DiagramTrainTypeManager:kn,DiagramStationManager:Fn},setup:function(){var e=Object(a["D"])(),t=Object(a["d"])((function(){return{tension:0,animation:!1,responsive:!0,aspectRatio:matchMedia("(max-width: 640px)").matches?2:3,parsing:{xAxisKey:"time",yAxisKey:"name"},indexAxis:"y",showLine:!0,plugins:{legend:{labels:{color:"#495057"}}},elements:{line:{borderWidth:1}},scales:{x:{min:n.getters.getMinAndMaxTimeOnDiagramData.min||"2021-10-14: 04:30",max:n.getters.getMinAndMaxTimeOnDiagramData.max,type:"time",time:{parser:"yyyy-MM-dd HH:mm",unit:"minute",stepSize:5,displayFormats:{minute:"HH:mm"},tooltipFormat:"HH:mm"},ticks:{color:"#495057"},grid:{color:"#ebedef"},position:"top"},y:{ticks:{color:"#495057",source:"labels"},grid:{color:"#ebedef"}}}}})),n=xe(),i=Object(a["d"])((function(){return n.getters.getTrainType(1)})),o=Object(a["d"])((function(){return n.state.trainTypes})),r=Object(a["d"])((function(){return n.getters.getChatrJsData}));Object(a["P"])(r,(function(){n.state.__chartRefresh()}));var l=Object(a["d"])((function(){return n.state.showingTrainId})),c=Object(a["d"])((function(){return o.value.size<6})),u=function(){n.dispatch("addInitialTrainType")};return Object(a["w"])((function(){e.value&&(n.commit("setChartRefresh",{chartRefresh:e.value.refresh}),n.dispatch("loadData",{id:1}))})),{data:r,graphOptions:t,ltdExp:i,trainTypes:o,formatDdHhmmToHhmm:oe,chartRef:e,showingTrainId:l,canAddTrainType:c,addInitialTrainType:u}}});n("0f71");const Un=r()(Gn,[["render",q],["__scopeId","data-v-77d93807"]]);var Hn=Un,En=Object(a["m"])({name:"Home",components:{MeasureNeccesaryTime:G,Diagram:Hn}});n("3595");const Qn=r()(En,[["render",f],["__scopeId","data-v-62adb661"]]);var Kn=Qn,Wn=[{path:"/",name:"Home",component:Kn,meta:{title:"DiaGen | ダイヤグラム作成サポートツール",desc:"鉄道運営シミュレーター向けダイヤグラム作成サポートツール"}}],zn=Object(d["a"])({history:Object(d["b"])("/a-train-supporter/"),routes:Wn}),Yn=zn,qn=n("e21a"),Jn=n.n(qn),Xn=n("9319"),Zn=n("0100"),$n=n("bb57"),ea=n("22a4"),ta=n("9899"),na=n("5b2c"),aa=n("6f85"),ia=n("ae1f"),oa=n("1e2d"),ra=n("cb8b"),la=n("3822"),ca=n("8398"),ua=n("b35c"),sa=n("5db6"),da=n("2052"),ba=n("246e"),ma=n("5bd2");n("098b"),n("e1ae"),n("4121"),n("bddf");Object(a["e"])(u).use(Ie,Se).use(Jn.a,{ignoreMutations:["setShowingTrainId","setChartRefresh","incrementTrainId"]}).use(Yn).use(Xn["a"]).component("Dropdown",Zn["a"]).component("SplitButton",ea["a"]).component("Button",$n["a"]).component("RadioButton",ua["a"]).component("Card",ta["a"]).component("Chart",we["a"]).component("DataTable",na["a"]).component("Column",aa["a"]).component("ScrollPanel",ia["a"]).component("Panel",oa["a"]).component("Calendar",ra["a"]).component("InputNumber",la["a"]).component("InputText",ca["a"]).component("Timeline",sa["a"]).component("Checkbox",da["a"]).component("Inplace",ba["a"]).component("Dialog",ma["a"]).mount("#app")},e42a:function(e,t,n){"use strict";n("bb1f")},f32c:function(e,t,n){},f414:function(e,t,n){"use strict";n("2043")},f7d3:function(e,t,n){}});
//# sourceMappingURL=index.9a5a0c29.js.map